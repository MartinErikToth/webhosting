--------------------------------------------------------
--  File created - hétfő-március-24-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table BEJEGYZES
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."BEJEGYZES" 
   (	"BEJEGYZES_SZAMA" NUMBER, 
	"TIPUS" VARCHAR2(50 BYTE), 
	"KERDES" VARCHAR2(500 BYTE), 
	"VALASZ" CLOB, 
	"MIKOR_KESZULT" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("VALASZ") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Table CSOMAG_TARTALMA
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."CSOMAG_TARTALMA" 
   (	"SZOLGALTATASKOD" NUMBER, 
	"CSOMAGKOD" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DIJCSOMAG
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."DIJCSOMAG" 
   (	"CSOMAGKOD" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CSOMAGNEV" VARCHAR2(100 BYTE), 
	"CSOMAG_AR" NUMBER(10,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table FELHASZNALOK
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."FELHASZNALOK" 
   (	"ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"BE_VAN_JELENTKEZVE" CHAR(1 BYTE), 
	"EMAIL" VARCHAR2(255 BYTE), 
	"FELHASZNALONEV" VARCHAR2(100 BYTE), 
	"JELSZO" VARCHAR2(255 BYTE), 
	"SZEREP" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SAD
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."SAD" 
   (	"ID" NUMBER
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SZAMLAK
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."SZAMLAK" 
   (	"SZAMLASZAM" VARCHAR2(20 BYTE), 
	"TERMEKMEGNEVEZES" VARCHAR2(100 BYTE), 
	"ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"VEVO_ADOSZAMA" VARCHAR2(15 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SZAMLARA_KERUL
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."SZAMLARA_KERUL" 
   (	"SZAMLASZAM" NUMBER, 
	"IDOPONT" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table VASARLAS
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."VASARLAS" 
   (	"VASARLAS_AZON" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"VASARLAS_IDOPONT" DATE DEFAULT SYSDATE, 
	"FELHASZNALO_ID" NUMBER, 
	"SZAMLASZAM" VARCHAR2(25 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table VEVO
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."VEVO" 
   (	"VEVO_ADOSZAMA" VARCHAR2(15 BYTE), 
	"VEVO_CIME" VARCHAR2(100 BYTE), 
	"VEVO_NEVE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table WEB_SZOLGALTATAS
--------------------------------------------------------

  CREATE TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" 
   (	"SZOLGALTATASKOD" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"SZOLGALTATAS_NEV" VARCHAR2(150 BYTE), 
	"SZOLGALTATAS_TIPUS" VARCHAR2(100 BYTE), 
	"SZOLGALTATAS_EGYSEGAR" NUMBER(10,2), 
	"AKTIV_E" CHAR(1 BYTE), 
	"HASZNALAT_KEZDETE" DATE, 
	"HASZNALAT_VEGE" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into C##R6LBDN.BEJEGYZES
SET DEFINE OFF;
Insert into C##R6LBDN.BEJEGYZES (BEJEGYZES_SZAMA,TIPUS,KERDES,MIKOR_KESZULT) values ('1','Technikai','Hogyan lehet visszaállítani a jelszavam?',to_date('25-MÁRC. -24','RR-MON-DD'));
Insert into C##R6LBDN.BEJEGYZES (BEJEGYZES_SZAMA,TIPUS,KERDES,MIKOR_KESZULT) values ('2','Számlázás','Meg tudom nézni, hogy a számláim mikor készültek?',to_date('25-MÁRC. -24','RR-MON-DD'));
Insert into C##R6LBDN.BEJEGYZES (BEJEGYZES_SZAMA,TIPUS,KERDES,MIKOR_KESZULT) values ('3','Kereskedés','Mennyi idő alatt lehet eladni egy domaint?',to_date('25-MÁRC. -24','RR-MON-DD'));
Insert into C##R6LBDN.BEJEGYZES (BEJEGYZES_SZAMA,TIPUS,KERDES,MIKOR_KESZULT) values ('4','Kereskedés','Hogyan zajlik a domain adásvétel folyamata?',to_date('25-MÁRC. -24','RR-MON-DD'));
Insert into C##R6LBDN.BEJEGYZES (BEJEGYZES_SZAMA,TIPUS,KERDES,MIKOR_KESZULT) values ('5','Technikai','Biztonságos a domain vásárlás/eladás az oldalon?',to_date('25-MÁRC. -24','RR-MON-DD'));
REM INSERTING into C##R6LBDN.CSOMAG_TARTALMA
SET DEFINE OFF;
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('1','1');
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('1','4');
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('1','5');
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('2','2');
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('3','2');
Insert into C##R6LBDN.CSOMAG_TARTALMA (SZOLGALTATASKOD,CSOMAGKOD) values ('3','4');
REM INSERTING into C##R6LBDN.DIJCSOMAG
SET DEFINE OFF;
Insert into C##R6LBDN.DIJCSOMAG (CSOMAGKOD,CSOMAGNEV,CSOMAG_AR) values ('1','Alap csomag','1999,99');
Insert into C##R6LBDN.DIJCSOMAG (CSOMAGKOD,CSOMAGNEV,CSOMAG_AR) values ('2','Prémium csomag','6999,99');
Insert into C##R6LBDN.DIJCSOMAG (CSOMAGKOD,CSOMAGNEV,CSOMAG_AR) values ('3','Exclusive csomag','13999,99');
Insert into C##R6LBDN.DIJCSOMAG (CSOMAGKOD,CSOMAGNEV,CSOMAG_AR) values ('4','Egyedi csomag','5999,99');
Insert into C##R6LBDN.DIJCSOMAG (CSOMAGKOD,CSOMAGNEV,CSOMAG_AR) values ('5','Tömör csomag','12999,99');
REM INSERTING into C##R6LBDN.FELHASZNALOK
SET DEFINE OFF;
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('21','N','newuser@example.com','NewUser','securePass123','Vendeg');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('22','N','asdnewuser@example.com','asd','securePaasdasdss123','Vendeg');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('1','Y','janesmith@example.com','JaneSmith','securehash456','Szerkeszto');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('2','N','anna.kovacs@example.com','AnnaK','jelszo123','Vendeg');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('3','N','arrears@example.com','CsabaT','pass789','Vendeg');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('4','N','janos.szabo@email.com','janos_szabo','securepass','Vendeg');
Insert into C##R6LBDN.FELHASZNALOK (ID,BE_VAN_JELENTKEZVE,EMAIL,FELHASZNALONEV,JELSZO,SZEREP) values ('5','N','nagy.antal@example.com','Anti','anti29','Szerkeszto');
REM INSERTING into C##R6LBDN.SAD
SET DEFINE OFF;
REM INSERTING into C##R6LBDN.SZAMLAK
SET DEFINE OFF;
Insert into C##R6LBDN.SZAMLAK (SZAMLASZAM,TERMEKMEGNEVEZES,ID,VEVO_ADOSZAMA) values ('10001','Tárhely csomag "Alap"','1','24321-654-7');
Insert into C##R6LBDN.SZAMLAK (SZAMLASZAM,TERMEKMEGNEVEZES,ID,VEVO_ADOSZAMA) values ('10002','Tárhely csomag "Prémium"','2','36745-987-1');
Insert into C##R6LBDN.SZAMLAK (SZAMLASZAM,TERMEKMEGNEVEZES,ID,VEVO_ADOSZAMA) values ('10003','VPS Szerver Bérlés','3','15367-321-9');
Insert into C##R6LBDN.SZAMLAK (SZAMLASZAM,TERMEKMEGNEVEZES,ID,VEVO_ADOSZAMA) values ('10004','Domain cím vásárlás','4','47892-213-4');
Insert into C##R6LBDN.SZAMLAK (SZAMLASZAM,TERMEKMEGNEVEZES,ID,VEVO_ADOSZAMA) values ('10005','Webtárhely bérlés','5','59123-789-6');
REM INSERTING into C##R6LBDN.SZAMLARA_KERUL
SET DEFINE OFF;
REM INSERTING into C##R6LBDN.VASARLAS
SET DEFINE OFF;
REM INSERTING into C##R6LBDN.VEVO
SET DEFINE OFF;
Insert into C##R6LBDN.VEVO (VEVO_ADOSZAMA,VEVO_CIME,VEVO_NEVE) values ('24321-654-7','Debrecen, Ilona utca','Kovács András');
Insert into C##R6LBDN.VEVO (VEVO_ADOSZAMA,VEVO_CIME,VEVO_NEVE) values ('36745-987-1','Szeged, Londoni körút','Nagy Éva');
Insert into C##R6LBDN.VEVO (VEVO_ADOSZAMA,VEVO_CIME,VEVO_NEVE) values ('15367-321-9','Győr, Kertész utca','Tóth Péter');
Insert into C##R6LBDN.VEVO (VEVO_ADOSZAMA,VEVO_CIME,VEVO_NEVE) values ('47892-213-4','Pécs, Széchényi tér','Farkas Katalin');
Insert into C##R6LBDN.VEVO (VEVO_ADOSZAMA,VEVO_CIME,VEVO_NEVE) values ('59123-789-6','Miskolc, Vad utca','Szabó Gabriella');
REM INSERTING into C##R6LBDN.WEB_SZOLGALTATAS
SET DEFINE OFF;
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('21','E-mail hosting','Prémium','2500','Y',to_date('25-MÁRC. -23','RR-MON-DD'),to_date('25-MÁRC. -30','RR-MON-DD'));
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('1','Domain regisztráció','Alap','1500','Y',to_date('25-MÁRC. -23','RR-MON-DD'),to_date('25-MÁRC. -30','RR-MON-DD'));
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('2','Domain bérlés','Alap','5000','Y',to_date('25-MÁRC. -24','RR-MON-DD'),to_date('25-MÁRC. -30','RR-MON-DD'));
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('3','Tárhely bővítés','Extra tárhely','990','Y',to_date('25-JÚN.  -02','RR-MON-DD'),to_date('25-OKT.  -26','RR-MON-DD'));
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('4','SSD tárhely','Prémium','5000','Y',to_date('25-MÁRC. -18','RR-MON-DD'),to_date('25-MÁRC. -30','RR-MON-DD'));
Insert into C##R6LBDN.WEB_SZOLGALTATAS (SZOLGALTATASKOD,SZOLGALTATAS_NEV,SZOLGALTATAS_TIPUS,SZOLGALTATAS_EGYSEGAR,AKTIV_E,HASZNALAT_KEZDETE,HASZNALAT_VEGE) values ('5','Szerver tárhely','Prémium','5000','Y',to_date('25-MÁRC. -22','RR-MON-DD'),to_date('25-MÁRC. -29','RR-MON-DD'));
--------------------------------------------------------
--  DDL for Index PK_BEJEGYZES
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##R6LBDN"."PK_BEJEGYZES" ON "C##R6LBDN"."BEJEGYZES" ("BEJEGYZES_SZAMA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_SZAMLAK
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##R6LBDN"."PK_SZAMLAK" ON "C##R6LBDN"."SZAMLAK" ("SZAMLASZAM") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger TRG_AUTOMATIKUS_DATUM_BEALL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##R6LBDN"."TRG_AUTOMATIKUS_DATUM_BEALL" BEFORE INSERT 
ON C##R6LBDN.WEB_SZOLGALTATAS
FOR EACH ROW
BEGIN
  IF :NEW.HASZNALAT_KEZDETE IS NULL THEN
    :NEW.HASZNALAT_KEZDETE := SYSDATE;
  END IF;
END;
/
ALTER TRIGGER "C##R6LBDN"."TRG_AUTOMATIKUS_DATUM_BEALL" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRG_EMAIL_ELLENORZES
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##R6LBDN"."TRG_EMAIL_ELLENORZES" BEFORE INSERT OR UPDATE ON C##R6LBDN.FELHASZNALOK
FOR EACH ROW
BEGIN
  IF INSTR(:NEW.EMAIL, '@') = 0 THEN
    RAISE_APPLICATION_ERROR(-20001, 'Az email cím formátuma nem megfelelő!');
  END IF;
END;

/
ALTER TRIGGER "C##R6LBDN"."TRG_EMAIL_ELLENORZES" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRG_FELTOLTES_MEGVONAS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##R6LBDN"."TRG_FELTOLTES_MEGVONAS" BEFORE INSERT OR UPDATE ON C##R6LBDN.WEB_SZOLGALTATAS
FOR EACH ROW
BEGIN
    IF :NEW.AKTIV_E = 'N' THEN
       RAISE_APPLICATION_ERROR(-20010, 'Az oldal korlátozott, fizetés szükséges, új adat nem tölthető fel.');
    END IF;
END;

/
ALTER TRIGGER "C##R6LBDN"."TRG_FELTOLTES_MEGVONAS" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRG_FIZETESI_HATRALEK
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##R6LBDN"."TRG_FIZETESI_HATRALEK" 
AFTER UPDATE ON C##R6LBDN.FELHASZNALOK
FOR EACH ROW
BEGIN
    DBMS_OUTPUT.PUT_LINE('Trigger futott: ID=' || :NEW.ID || ', Régi EMAIL=' || :OLD.EMAIL || ', Új EMAIL=' || :NEW.EMAIL);

    -- Ha az új e-mail jelzi a fizetési hátralékot, és az előző nem volt ilyen
    IF :NEW.EMAIL = 'arrears@example.com' AND :OLD.EMAIL <> 'arrears@example.com' THEN
         sp_restrict_user_page(:NEW.ID, :NEW.FELHASZNALONEV);
         DBMS_OUTPUT.PUT_LINE('Fizetési hátralék miatt a felhasználó oldala korlátozva lett.');
    END IF;
EXCEPTION
   WHEN OTHERS THEN
         DBMS_OUTPUT.PUT_LINE('Trigger hiba: ' || SQLERRM);
END;

/
ALTER TRIGGER "C##R6LBDN"."TRG_FIZETESI_HATRALEK" ENABLE;
--------------------------------------------------------
--  DDL for Procedure SP_ARCHIVE_INVOICE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "C##R6LBDN"."SP_ARCHIVE_INVOICE" (p_szamlaszam NUMBER) IS
BEGIN
   INSERT INTO C##R6LBDN.SAD (ID) 
   VALUES (p_szamlaszam);
   COMMIT;
EXCEPTION
   WHEN OTHERS THEN
      RAISE_APPLICATION_ERROR(-20003, 'Hiba az archíválás során: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  DDL for Procedure SP_RESTRICT_USER_PAGE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "C##R6LBDN"."SP_RESTRICT_USER_PAGE" (
    p_felhasznalo_id NUMBER,
    p_username      VARCHAR2
) IS
BEGIN
   -- Feltételezzük, hogy az oldal neve a felhasználó neve + ' oldal'
   UPDATE C##R6LBDN.WEB_SZOLGALTATAS
      SET AKTIV_E = 'N'
    WHERE SZOLGALTATAS_NEV = p_username || ' oldal';

   DBMS_OUTPUT.PUT_LINE('Felhasználó ' || p_felhasznalo_id || ' oldala korlátozva lett.');
EXCEPTION
   WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE('Hiba az oldal korlátozása során: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  Constraints for Table DIJCSOMAG
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."DIJCSOMAG" MODIFY ("CSOMAGKOD" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."DIJCSOMAG" MODIFY ("CSOMAGNEV" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."DIJCSOMAG" MODIFY ("CSOMAG_AR" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."DIJCSOMAG" ADD PRIMARY KEY ("CSOMAGKOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."DIJCSOMAG" ADD UNIQUE ("CSOMAGNEV")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table BEJEGYZES
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."BEJEGYZES" ADD CONSTRAINT "PK_BEJEGYZES" PRIMARY KEY ("BEJEGYZES_SZAMA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."BEJEGYZES" MODIFY ("TIPUS" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."BEJEGYZES" MODIFY ("KERDES" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."BEJEGYZES" MODIFY ("VALASZ" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."BEJEGYZES" MODIFY ("MIKOR_KESZULT" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SZAMLARA_KERUL
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."SZAMLARA_KERUL" MODIFY ("SZAMLASZAM" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."SZAMLARA_KERUL" MODIFY ("IDOPONT" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."SZAMLARA_KERUL" ADD PRIMARY KEY ("SZAMLASZAM", "IDOPONT")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CSOMAG_TARTALMA
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."CSOMAG_TARTALMA" MODIFY ("SZOLGALTATASKOD" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."CSOMAG_TARTALMA" MODIFY ("CSOMAGKOD" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."CSOMAG_TARTALMA" ADD PRIMARY KEY ("SZOLGALTATASKOD", "CSOMAGKOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table VEVO
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."VEVO" MODIFY ("VEVO_CIME" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."VEVO" MODIFY ("VEVO_NEVE" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."VEVO" ADD PRIMARY KEY ("VEVO_ADOSZAMA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table SZAMLAK
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."SZAMLAK" ADD CONSTRAINT "PK_SZAMLAK" PRIMARY KEY ("SZAMLASZAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."SZAMLAK" MODIFY ("SZAMLASZAM" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."SZAMLAK" MODIFY ("TERMEKMEGNEVEZES" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."SZAMLAK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."SZAMLAK" MODIFY ("VEVO_ADOSZAMA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table FELHASZNALOK
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" MODIFY ("FELHASZNALONEV" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" MODIFY ("JELSZO" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" MODIFY ("SZEREP" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" ADD CHECK (be_van_jelentkezve IN ('Y', 'N')) ENABLE;
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" ADD CHECK (Szerep IN ('Vendeg', 'Szerkeszto')) ENABLE;
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" ADD UNIQUE ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."FELHASZNALOK" ADD UNIQUE ("FELHASZNALONEV")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table WEB_SZOLGALTATAS
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" MODIFY ("SZOLGALTATASKOD" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" MODIFY ("SZOLGALTATAS_NEV" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" MODIFY ("SZOLGALTATAS_TIPUS" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" MODIFY ("SZOLGALTATAS_EGYSEGAR" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" MODIFY ("AKTIV_E" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" ADD CHECK (aktiv_e IN ('Y', 'N')) ENABLE;
  ALTER TABLE "C##R6LBDN"."WEB_SZOLGALTATAS" ADD PRIMARY KEY ("SZOLGALTATASKOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table VASARLAS
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."VASARLAS" MODIFY ("VASARLAS_AZON" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."VASARLAS" MODIFY ("VASARLAS_IDOPONT" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."VASARLAS" MODIFY ("FELHASZNALO_ID" NOT NULL ENABLE);
  ALTER TABLE "C##R6LBDN"."VASARLAS" ADD PRIMARY KEY ("VASARLAS_AZON")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "C##R6LBDN"."VASARLAS" MODIFY ("SZAMLASZAM" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table CSOMAG_TARTALMA
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."CSOMAG_TARTALMA" ADD CONSTRAINT "FK_CSOMAGTARTALMA_CSOMAG" FOREIGN KEY ("CSOMAGKOD")
	  REFERENCES "C##R6LBDN"."DIJCSOMAG" ("CSOMAGKOD") ON DELETE CASCADE ENABLE;
  ALTER TABLE "C##R6LBDN"."CSOMAG_TARTALMA" ADD CONSTRAINT "FK_CSOMAGTARTALMA_SZOLGALTATAS" FOREIGN KEY ("SZOLGALTATASKOD")
	  REFERENCES "C##R6LBDN"."WEB_SZOLGALTATAS" ("SZOLGALTATASKOD") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SZAMLAK
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."SZAMLAK" ADD CONSTRAINT "FK_SZAMLAK_VEVO" FOREIGN KEY ("VEVO_ADOSZAMA")
	  REFERENCES "C##R6LBDN"."VEVO" ("VEVO_ADOSZAMA") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VASARLAS
--------------------------------------------------------

  ALTER TABLE "C##R6LBDN"."VASARLAS" ADD CONSTRAINT "FK_VASARLAS_FELHASZNALO" FOREIGN KEY ("FELHASZNALO_ID")
	  REFERENCES "C##R6LBDN"."FELHASZNALOK" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "C##R6LBDN"."VASARLAS" ADD CONSTRAINT "FK_VASARLAS_SZAMLASZAM" FOREIGN KEY ("SZAMLASZAM")
	  REFERENCES "C##R6LBDN"."SZAMLAK" ("SZAMLASZAM") ON DELETE CASCADE ENABLE;
